function g=gravity(parms,q)

x0 = cos(q(2));
x1 = sin(q(2));
x2 = -9.81*x1;
x3 = cos(q(4));
x4 = cos(q(3));
x5 = x2*x4;
x6 = -9.81*x0;
x7 = -x6;
x8 = sin(q(4));
x9 = x3*x5 + x7*x8;
x10 = -x2;
x11 = sin(q(3));
x12 = x10*x11;
x13 = -x12;
x14 = -x13;
x15 = sin(q(6));
x16 = cos(q(5));
x17 = sin(q(5));
x18 = x14*x17 + x16*x9;
x19 = cos(q(6));
x20 = -x5;
x21 = x20*x8 + x3*x7;
x22 = x15*x21 + x18*x19;
x23 = cos(q(7));
x24 = -x9;
x25 = x14*x16 + x17*x24;
x26 = -x25;
x27 = sin(q(7));
x28 = x22*x23 + x26*x27;
x29 = -x18;
x30 = x15*x29 + x19*x21;
x31 = -x30;
x32 = -parms(67)*x31 + parms(69)*x28;
x33 = -x27;
x34 = -x22;
x35 = x23*x26 + x27*x34;
x36 = parms(68)*x31 - parms(69)*x35;
x37 = parms(58)*x26 + parms(59)*x31 + x23*x36 + x32*x33;
x38 = parms(70)*x28;
x39 = x27*x38;
x40 = parms(70)*x35;
x41 = x23*x40;
x42 = parms(67)*x35 - parms(68)*x28;
x43 = -parms(57)*x26 + parms(59)*x22 - 0.088*x39 - 0.088*x41 - x42;
x44 = parms(47)*x25 + parms(48)*x29 + x15*x37 + x19*x43;
x45 = parms(60)*x22 + x23*x38 + x33*x40;
x46 = -x15;
x47 = parms(70)*x31;
x48 = parms(60)*x30 - x47;
x49 = parms(50)*x18 + x19*x45 + x46*x48;
x50 = x17*x49;
x51 = parms(50)*x25 - parms(60)*x26 - x39 - x41;
x52 = x16*x51;
x53 = parms(37)*x14 + parms(39)*x9 + x44 - 0.0825*x50 - 0.0825*x52;
x54 = -x17;
x55 = parms(40)*x13 + x49*x54 - x52;
x56 = -x21;
x57 = parms(57)*x30 + parms(58)*x34 + x23*x32 + x27*x36 - 0.088*x47;
x58 = parms(47)*x56 + parms(49)*x18 - x57;
x59 = parms(48)*x21 + parms(49)*x26 + x19*x37 + x43*x46;
x60 = parms(38)*x13 + parms(39)*x56 + x16*x59 - 0.384*x50 - 0.384*x52 + x54*x58;
x61 = parms(27)*x12 + parms(28)*x20 + x3*x53 - 0.0825*x55 + x60*x8;
x62 = parms(30)*x12 - x55;
x63 = x16*x49;
x64 = parms(40)*x9 + x51*x54 + x63;
x65 = parms(50)*x21 + x15*x45 + x19*x48;
x66 = parms(40)*x21 + x65;
x67 = -x8;
x68 = parms(30)*x5 + x3*x64 + x66*x67;
x69 = parms(28)*x7 + parms(29)*x13 + x3*x60 + x53*x67;
x70 = parms(37)*x21 + parms(38)*x24 - x16*x58 + 0.384*x17*x51 + x54*x59 - 0.384*x63 - 0.0825*x65;
x71 = -parms(27)*x7 + parms(29)*x5 - 0.0825*x3*x66 - 0.0825*x64*x8 - x70;

g=zeros(7,1);

g(1) = -x0*(parms(19)*x2 - x61) - x1*(parms(19)*x7 - 0.316*x11*x68 - x11*x71 - 0.316*x4*x62 + x4*x69);
g(2) = parms(17)*x6 + parms(18)*x10 - 0.316*x11*x62 + x11*x69 + 0.316*x4*x68 + x4*x71;
g(3) = x61;
g(4) = x70;
g(5) = x44;
g(6) = x57;
g(7) = x42;




