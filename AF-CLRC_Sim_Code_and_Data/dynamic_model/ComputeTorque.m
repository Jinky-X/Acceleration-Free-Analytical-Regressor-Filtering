function tau=ComputeTorque(parms,q,dq,ddq)


x0 = sin(q(2));
x1 = -dq(1);
x2 = x0*x1;
x3 = cos(q(2));
x4 = x1*x3;
x5 = dq(2)*parms(16) + parms(13)*x2 + parms(15)*x4;
x6 = -9.81*x0;
x7 = -ddq(1);
x8 = dq(1)*dq(2)*x0 + x3*x7;
x9 = dq(2)*parms(13) + parms(11)*x2 + parms(12)*x4;
x10 = dq(2)*x4;
x11 = x0*x7 + x10;
x12 = cos(q(3));
x13 = sin(q(3));
x14 = dq(2)*x13 + x12*x2;
x15 = -x13;
x16 = dq(2)*x12 + x15*x2;
x17 = -x4;
x18 = dq(3) + x17;
x19 = parms(22)*x14 + parms(24)*x16 + parms(25)*x18;
x20 = ddq(2)*x13 + dq(3)*x16 + x11*x12;
x21 = -0.316*x10 - 0.316*x11;
x22 = 0.316*ddq(2) - 0.316*x2*x4 + x6;
x23 = x12*x21 + x15*x22;
x24 = -x14;
x25 = ddq(2)*x12 + dq(3)*x24 - x11*x13;
x26 = ddq(3) - x8;
x27 = x12*x22 + x13*x21;
x28 = parms(21)*x14 + parms(22)*x16 + parms(23)*x18;
x29 = -x16;
x30 = cos(q(4));
x31 = sin(q(4));
x32 = x18*x30 + x24*x31;
x33 = dq(4)*x32 + x20*x30 + x26*x31;
x34 = x14*x16;
x35 = x26 + x34;
x36 = -x23;
x37 = -0.0825*x35 + x36;
x38 = dq(4) + x29;
x39 = x14*x30 + x18*x31;
x40 = parms(31)*x39 + parms(32)*x32 + parms(33)*x38;
x41 = -x39;
x42 = parms(33)*x39 + parms(35)*x32 + parms(36)*x38;
x43 = -((x18)*(x18));
x44 = -((x16)*(x16)) + x43;
x45 = x27 + 0.0825*x44;
x46 = -9.81*x3;
x47 = -x46;
x48 = -0.316*((dq(2))*(dq(2))) - 0.316*((x2)*(x2)) + x47;
x49 = -x25;
x50 = x14*x18;
x51 = x48 + 0.0825*x49 + 0.0825*x50;
x52 = x30*x45 + x31*x51;
x53 = ddq(4) + x49;
x54 = -x20;
x55 = dq(4)*x41 + x26*x30 + x31*x54;
x56 = -x33;
x57 = sin(q(5));
x58 = -x53;
x59 = cos(q(5));
x60 = -x38;
x61 = x39*x59 + x57*x60;
x62 = -x61;
x63 = dq(5)*x62 + x56*x57 + x58*x59;
x64 = x32*x39;
x65 = x58 + x64;
x66 = -((x38)*(x38));
x67 = -((x32)*(x32));
x68 = x66 + x67;
x69 = x52 + 0.384*x65 - 0.0825*x68;
x70 = -x57;
x71 = x32*x38;
x72 = x33 + x71;
x73 = x38*x39;
x74 = -x55 + x73;
x75 = x37 + 0.384*x72 - 0.0825*x74;
x76 = -x59;
x77 = x69*x70 + x75*x76;
x78 = x41*x57 + x59*x60;
x79 = -x78;
x80 = dq(5) + x32;
x81 = parms(41)*x61 + parms(42)*x78 + parms(43)*x80;
x82 = x59*x69 + x70*x75;
x83 = -x82;
x84 = ddq(5) + x55;
x85 = parms(42)*x61 + parms(44)*x78 + parms(45)*x80;
x86 = dq(5)*x78 + x33*x59 + x57*x58;
x87 = cos(q(6));
x88 = -((x39)*(x39));
x89 = x66 + x88;
x90 = x53 + x64;
x91 = -x31;
x92 = x30*x51 + x45*x91;
x93 = 0.384*x89 - 0.0825*x90 + x92;
x94 = sin(q(6));
x95 = x82*x87 + x93*x94;
x96 = x62*x94 + x80*x87;
x97 = -((x96)*(x96));
x98 = dq(6) + x79;
x99 = -((x98)*(x98));
x100 = x97 + x99;
x101 = 0.088*x100 + x95;
x102 = sin(q(7));
x103 = -x102;
x104 = cos(q(7));
x105 = -x86;
x106 = x61*x87 + x80*x94;
x107 = -x106;
x108 = dq(6)*x107 + x105*x94 + x84*x87;
x109 = -x108;
x110 = x106*x98;
x111 = x109 + x110;
x112 = -x77;
x113 = 0.088*x111 + x112;
x114 = x101*x103 + x104*x113;
x115 = ddq(7) + x109;
x116 = x101*x104 + x102*x113;
x117 = x102*x107 + x104*x98;
x118 = dq(6)*x96 + x84*x94 + x86*x87;
x119 = -x63;
x120 = ddq(6) + x119;
x121 = dq(7)*x117 + x102*x120 + x104*x118;
x122 = -x118;
x123 = x102*x98 + x104*x106;
x124 = -x123;
x125 = dq(7)*x124 + x102*x122 + x104*x120;
x126 = -x96;
x127 = dq(7) + x126;
x128 = parms(61)*x123 + parms(62)*x117 + parms(63)*x127;
x129 = parms(62)*x123 + parms(64)*x117 + parms(65)*x127;
x130 = parms(63)*x121 + parms(65)*x125 + parms(66)*x115 + parms(67)*x114 - parms(68)*x116 - x117*x128 + x123*x129;
x131 = parms(51)*x106 + parms(52)*x96 + parms(53)*x98;
x132 = parms(53)*x106 + parms(55)*x96 + parms(56)*x98;
x133 = -((x117)*(x117));
x134 = -((x127)*(x127));
x135 = x123*x127;
x136 = x117*x123;
x137 = parms(67)*(x133 + x134) + parms(68)*(-x115 + x136) + parms(69)*(x125 + x135) + parms(70)*x116;
x138 = x102*x137;
x139 = -((x123)*(x123));
x140 = x117*x127;
x141 = parms(67)*(x115 + x136) + parms(68)*(x134 + x139) + parms(69)*(-x121 + x140) + parms(70)*x114;
x142 = x104*x141;
x143 = parms(52)*x118 + parms(54)*x108 + parms(55)*x120 - parms(57)*x112 + parms(59)*x95 + x107*x132 - x130 + x131*x98 - 0.088*x138 - 0.088*x142;
x144 = x83*x94 + x87*x93;
x145 = -x144;
x146 = x106*x96;
x147 = x120 + x146;
x148 = x145 - 0.088*x147;
x149 = parms(63)*x123 + parms(65)*x117 + parms(66)*x127;
x150 = parms(62)*x121 + parms(64)*x125 + parms(65)*x115 - parms(67)*x148 + parms(69)*x116 + x124*x149 + x127*x128;
x151 = parms(52)*x106 + parms(54)*x96 + parms(55)*x98;
x152 = parms(61)*x121 + parms(62)*x125 + parms(63)*x115 + parms(68)*x148 - parms(69)*x114 + x117*x149 - x127*x129;
x153 = parms(51)*x118 + parms(52)*x108 + parms(53)*x120 + parms(58)*x112 + parms(59)*x145 + x103*x150 + x104*x152 + x132*x96 - x151*x98;
x154 = parms(43)*x86 + parms(45)*x63 + parms(46)*x84 + parms(47)*x77 + parms(48)*x83 + x143*x87 + x153*x94 + x61*x85 + x79*x81;
x155 = -((x106)*(x106));
x156 = x96*x98;
x157 = x78*x80;
x158 = x61*x78;
x159 = -((x61)*(x61));
x160 = -((x80)*(x80));
x161 = parms(47)*(x158 + x84) + parms(48)*(x159 + x160) + parms(49)*(x105 + x157) + parms(50)*x77 - parms(57)*x111 - parms(58)*(x118 + x156) - parms(59)*(x155 + x97) - parms(60)*x112 - x138 - x142;
x162 = x161*x59;
x163 = -((x78)*(x78));
x164 = x61*x80;
x165 = parms(57)*x100 + parms(58)*(-x120 + x146) + parms(59)*(x108 + x110) + parms(60)*x95 + x103*x141 + x104*x137;
x166 = parms(67)*(-x125 + x135) + parms(68)*(x121 + x140) + parms(69)*(x133 + x139) + parms(70)*x148;
x167 = parms(57)*x147 + parms(58)*(x155 + x99) + parms(59)*(x122 + x156) + parms(60)*x144 - x166;
x168 = -x94;
x169 = parms(47)*(x160 + x163) + parms(48)*(x158 - x84) + parms(49)*(x164 + x63) + parms(50)*x82 + x165*x87 + x167*x168;
x170 = x169*x57;
x171 = parms(32)*x33 + parms(34)*x55 + parms(35)*x53 - parms(37)*x37 + parms(39)*x52 + x154 - 0.0825*x162 - 0.0825*x170 + x38*x40 + x41*x42;
x172 = parms(43)*x61 + parms(45)*x78 + parms(46)*x80;
x173 = parms(53)*x118 + parms(55)*x108 + parms(56)*x120 + parms(57)*x144 - parms(58)*x95 + x102*x152 + x104*x150 + x106*x151 + x126*x131 - 0.088*x166;
x174 = parms(42)*x86 + parms(44)*x63 + parms(45)*x84 - parms(47)*x93 + parms(49)*x82 + x172*x62 - x173 + x80*x81;
x175 = parms(32)*x39 + parms(34)*x32 + parms(35)*x38;
x176 = parms(41)*x86 + parms(42)*x63 + parms(43)*x84 + parms(48)*x93 + parms(49)*x112 + x143*x168 + x153*x87 + x172*x78 - x80*x85;
x177 = parms(31)*x33 + parms(32)*x55 + parms(33)*x53 + parms(38)*x37 - parms(39)*x92 - 0.384*x162 - 0.384*x170 + x174*x70 + x175*x60 + x176*x59 + x32*x42;
x178 = parms(37)*x74 + parms(38)*x72 + parms(39)*(x67 + x88) + parms(40)*x37 + x161*x76 + x169*x70;
x179 = parms(23)*x20 + parms(25)*x25 + parms(26)*x26 + parms(27)*x23 - parms(28)*x27 + x14*x19 + x171*x30 + x177*x31 - 0.0825*x178 + x28*x29;
x180 = parms(47)*(x119 + x164) + parms(48)*(x157 + x86) + parms(49)*(x159 + x163) + parms(50)*x93 + x165*x94 + x167*x87;
x181 = parms(37)*x90 + parms(38)*x89 + parms(39)*(x56 + x71) + parms(40)*x92 + x180;
x182 = x169*x59;
x183 = parms(37)*x68 + parms(38)*x65 + parms(39)*(x55 + x73) + parms(40)*x52 + x161*x70 + x182;
x184 = parms(27)*x44 + parms(28)*(-x26 + x34) + parms(29)*(x25 + x50) + parms(30)*x27 + x181*x91 + x183*x30;
x185 = parms(23)*x14 + parms(25)*x16 + parms(26)*x18;
x186 = parms(21)*x20 + parms(22)*x25 + parms(23)*x26 + parms(28)*x48 + parms(29)*x36 + x16*x185 + x171*x91 + x177*x30 - x18*x19;
x187 = parms(27)*x35 + parms(28)*(-((x14)*(x14)) + x43) + parms(29)*(x16*x18 + x54) + parms(30)*x23 - x178;
x188 = dq(2)*parms(15) + parms(12)*x2 + parms(14)*x4;
x189 = parms(33)*x33 + parms(35)*x55 + parms(36)*x53 + parms(37)*x92 - parms(38)*x52 + 0.384*x161*x57 + x174*x76 + x175*x39 + x176*x70 - 0.0825*x180 - 0.384*x182 - x32*x40;
x190 = parms(22)*x20 + parms(24)*x25 + parms(25)*x26 - parms(27)*x48 + parms(29)*x27 + x18*x28 - 0.0825*x181*x30 - 0.0825*x183*x31 + x185*x24 - x189;


% tau=zeros(7,1);
tau(1) = ddq(1)*parms(6) - x0*(ddq(2)*parms(13) - dq(2)*x188 + parms(11)*x11 + parms(12)*x8 + parms(19)*x47 + x12*x186 - 0.316*x12*x187 - 0.316*x13*x184 + x15*x190 + x4*x5) - x3*(ddq(2)*parms(15) + dq(2)*x9 + parms(12)*x11 + parms(14)*x8 + parms(19)*x6 - x179 - x2*x5);
tau(2) = ddq(2)*parms(16) + parms(13)*x11 + parms(15)*x8 + parms(17)*x46 - parms(18)*x6 + 0.316*x12*x184 + x12*x190 + x13*x186 - 0.316*x13*x187 + x17*x9 + x188*x2;
tau(3) = x179;
tau(4) = x189;
tau(5) = x154;
tau(6) = x173;
tau(7) = x130;
